<main class="flex-1 overflow-y-auto p-8">
    <header class="mb-8">
        <h2 class="text-3xl font-black tracking-tighter text-slate-900">Riwayat Penyesuaian</h2>
        <p class="text-slate-500 text-sm">Audit koreksi stok (Stock Opname)</p>
    </header>

    <div class="bg-white rounded-[2.5rem] border border-slate-100 shadow-sm overflow-hidden">
        <table class="w-full text-left">
            <thead class="bg-slate-50 text-[10px] font-black text-slate-400 uppercase tracking-widest">
                <tr>
                    <th class="p-6">Tanggal</th>
                    <th class="p-6">Bahan</th>
                    <th class="p-6">Stok Fisik</th>
                    <th class="p-6">Alasan / Keterangan</th>
                </tr>
            </thead>
            <tbody id="penyesuaian-body" class="text-sm font-semibold"></tbody>
        </table>
    </div>
</main>

<script>
    async function fetchLogPenyesuaian() {
        const { data } = await _supabase.from('riwayat_penyesuaian').select('*, bahan(nama_bahan, satuan)').order('created_at', { ascending: false });
        document.getElementById('penyesuaian-body').innerHTML = data.map(i => `
            <tr class="border-b border-slate-50">
                <td class="p-6 text-slate-400">${new Date(i.created_at).toLocaleDateString('id-ID')}</td>
                <td class="p-6 font-bold">${i.bahan.nama_bahan}</td>
                <td class="p-6 font-black text-rose-500">${i.stok_fisik} ${i.bahan.satuan}</td>
                <td class="p-6 italic text-slate-500">"${i.keterangan}"</td>
            </tr>
        `).join('');
    }
    window.onload = fetchLogPenyesuaian;
</script>
